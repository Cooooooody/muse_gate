# 主体选择与校验测试手册

## 前置
- 启动后端：
  ```bash
  ~/dev/apache-maven-3.9.12/bin/mvn -f backend/pom.xml spring-boot:run
  ```
- 启动前端：
  ```bash
  cd web
  npm run dev -- --host
  ```
- 确认根目录 `.env` 包含：
  - `VITE_API_BASE_URL=http://localhost:8080`

## 用例 A：银行历史主体（公对公）
1. 销售端进入“合同录入”。
2. 勾选“是否公对公转账”。
3. 在“合同主体名称”输入关键字（如“上海”）。

预期结果：
- 推荐列表出现银行历史主体（来自 `/api/subjects/bank-history`）。
- 选择后主体名称锁定，禁止自由输入。

## 用例 B：客户主体（非公对公）
1. 取消“公对公转账”勾选。
2. 观察推荐列表。

预期结果：
- 推荐列表展示客户主体（来自 `/api/subjects/client`）。
- 允许自由输入主体名称。

## 用例 C：企查查校验（mock）
1. 填写主体名称与税号（可选）。
2. 点击“企查查校验（mock）”。

预期结果：
- 税号/地址被回填。
- 提示“主体信息校验通过（mock）”。

## 常见问题排查
- 无推荐列表：检查 `/api/subjects/bank-history` 或 `/api/subjects/client` 是否可访问。
- 校验失败：检查 `/api/subjects/verify` 是否可访问。
