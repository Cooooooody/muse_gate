# 登录与鉴权测试手册

## 前置
- 启动前端：
  ```bash
  cd web
  npm run dev -- --host
  ```
- 确认根目录 `.env` 包含：
  - `VITE_SUPABASE_URL=...`
  - `VITE_SUPABASE_ANON_KEY=...`

## 用例 A：管理员登录并进入销售类菜单
1. 打开登录页。
2. 输入账号 `admin@test.com`，密码 `123456`，点击“登录”。

预期结果：
- 登录成功进入主布局。
- 左侧菜单显示“合同录入”“支付码生成”。
- 顶部账号区域显示邮箱与“管理员”角色标签。

## 用例 B：财务登录并进入财务面板
1. 退出登录。
2. 输入账号 `finance@test.com`，密码 `123456`，点击“登录”。

预期结果：
- 登录成功进入主布局。
- 左侧菜单显示“对账中心”。
- 顶部角色标签显示“财务”。

## 用例 C：客户登录并进入客户面板
1. 退出登录。
2. 输入账号 `client@test.com`，密码 `123456`，点击“登录”。

预期结果：
- 登录成功进入主布局。
- 左侧菜单显示“合同 & 发票”。
- 顶部角色标签显示“客户”。

## 用例 D：退出登录
1. 点击右上角“退出”。

预期结果：
- 返回登录页。

## 常见问题排查
- 无法登录：确认 Supabase 项目已启用 email/password 登录方式。
- 角色异常：确认 `profiles` 表存在并允许当前用户读写（RLS）。
