# 销售端合同录入测试手册

## 前置
- 启动后端：
  ```bash
  ~/dev/apache-maven-3.9.12/bin/mvn -f backend/pom.xml spring-boot:run
  ```
- 启动前端：
  ```bash
  cd web
  npm run dev -- --host
  ```
- 确认根目录 `.env` 包含：
  - `VITE_API_BASE_URL=http://localhost:8080`

## 用例 A：公对公 + 多笔匹配
1. 使用 `sales@test.com` / `123456` 登录。
2. 点击左侧菜单“合同录入”。
3. 勾选“是否公对公转账”。
4. 在“主账号名称”输入 `MG-9527`。
5. 在“合同主体名称”中选择推荐的银行历史主体。
6. 点击“企查查校验（mock）”，确认税号/地址回填。
7. 点击“继续”进入“套餐/金额”。
8. 在“匹配到的付款记录”区域多选两笔付款记录。
9. 确认金额锁定为两笔合计。
10. 点击“继续”进入预览，确认生成合同内容后再点击“提交审核”。

预期结果：
- 金额输入被锁定为匹配合计。
- 提交成功提示“合同已提交审核”。

## 用例 B：非公对公 + 自定义金额
1. 进入“合同录入”页面。
2. 选择客户主体或自由输入主体名称。
3. 点击“企查查校验（mock）”，确认税号/地址回填。
4. 不选择任何匹配付款记录。
5. 在金额输入框填写自定义金额。
6. 点击“继续”，进入预览，确认合同内容生成后“提交审核”。

预期结果：
- 金额输入可编辑。
- 提交成功提示“合同已提交审核”。

## 常见问题排查
- 无法加载匹配记录：确认 `VITE_API_BASE_URL` 与后端已启动。
- 校验失败：确认后端 `/api/subjects/verify` 可访问。
